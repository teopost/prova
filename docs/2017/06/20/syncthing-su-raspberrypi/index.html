<!DOCTYPE html>
<html lang="es-419">
<head>
    <title>Syncthing su Raspberrypi &middot; stefanoteodorani.it</title>
    <meta name="generator" content="Hugo 0.70.0" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Stefano Teodorani">
    
      <meta name="description" content="">
    
    
    <link rel="canonical" href="https://www.stefanoteodorani.it/2017/06/20/syncthing-su-raspberrypi/"/>
    <link rel="icon" href="https://www.stefanoteodorani.it/favicon.ico">
    <link rel="apple-touch-icon" href="https://www.stefanoteodorani.it/apple-touch-icon.png"/>
    <link rel="stylesheet" href="https://www.stefanoteodorani.it/css/style.css">
    <link rel="stylesheet" href="https://www.stefanoteodorani.it/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://www.stefanoteodorani.it/css/monokai.css">
    <link rel="stylesheet" href="https://www.stefanoteodorani.it/fancybox/jquery.fancybox.css">
    
    <link rel="stylesheet" href="https://www.stefanoteodorani.it/css/button.css">
    
    <link rel="stylesheet" href="https://www.stefanoteodorani.it/css/notice.css">
    
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>


    <meta property="og:image" content="https://www.stefanoteodorani.it/banner/syncthing-su-raspberrypi.png" />
    <meta property="og:title" content="Syncthing su Raspberrypi" />
<meta property="og:description" content="Btsync era veramente un bel programma, ma dopo aver fatto venire l&rsquo;acquolina in bocca l&rsquo;hanno messo a pagamento.
La cosa peggiore tuttavia, restava il fatto che non fosse opensource." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.stefanoteodorani.it/2017/06/20/syncthing-su-raspberrypi/" />
<meta property="article:published_time" content="2017-06-20T22:11:56+02:00" />
<meta property="article:modified_time" content="2017-06-20T22:11:56+02:00" />

    
    <meta itemprop="name" content="Syncthing su Raspberrypi">
<meta itemprop="description" content="Btsync era veramente un bel programma, ma dopo aver fatto venire l&rsquo;acquolina in bocca l&rsquo;hanno messo a pagamento.
La cosa peggiore tuttavia, restava il fatto che non fosse opensource.">
<meta itemprop="datePublished" content="2017-06-20T22:11:56&#43;02:00" />
<meta itemprop="dateModified" content="2017-06-20T22:11:56&#43;02:00" />
<meta itemprop="wordCount" content="791">



<meta itemprop="keywords" content="raspberry," />
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Syncthing su Raspberrypi"/>
<meta name="twitter:description" content="Btsync era veramente un bel programma, ma dopo aver fatto venire l&rsquo;acquolina in bocca l&rsquo;hanno messo a pagamento.
La cosa peggiore tuttavia, restava il fatto che non fosse opensource."/>
<meta name="twitter:site" content="@teopost"/>



    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
<div class="container">


<div id="container">
	<header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="https://www.stefanoteodorani.it/" id="logo">
          
          <i class="logo" style="background-image: url('https://www.stefanoteodorani.it/css/images/logo.png')"></i>
          
          <span class="site-title">stefanoteodorani.it</span>
      </a>
      <nav id="main-nav">
          
          
          <a class="main-nav-link" href="https://www.stefanoteodorani.it/">Home</a>
          
          
          
          
          
          
          
          

          

          
          
          
          
          <a class="main-nav-link" href="http://teopost.github.io/ulisse">My Dog</a>
          
          
          
          <a class="main-nav-link" href="https://www.stefanoteodorani.it/tags/">Tags</a>
          
          
          
          <a class="main-nav-link" href="https://www.stefanoteodorani.it/categories/">Categories</a>
          
          
      </nav>
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://avatars0.githubusercontent.com/u/2573389?v=3&amp;s=460"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
              <input type="search" name="q" class="search-form-input" placeholder="Search">
              <button type="submit" class="search-form-submit">
              </button>
              <input type="hidden" name="sitesearch" value="https://www.stefanoteodorani.it/" />
         </form>
        </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tbody>
          <tr>
          
          
          <td><a class="main-nav-link" href="https://www.stefanoteodorani.it/">Home</a></td>
          
          
          
          
          
          
          
          

          

          
          
          
          
          <td><a class="main-nav-link" href="http://teopost.github.io/ulisse">My Dog</a></td>
          
          
          
          <td><a class="main-nav-link" href="https://www.stefanoteodorani.it/tags/">Tags</a></td>
          
          
          
          <td><a class="main-nav-link" href="https://www.stefanoteodorani.it/categories/">Categories</a></td>
          
          
          <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" class="search-form-input" placeholder="Search">
          <input type="hidden" name="sitesearch" value="https://www.stefanoteodorani.it/" />
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</header>

   	
   	<div class="outer">
		   
   		
	    	<aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="https://avatars0.githubusercontent.com/u/2573389?v=3&amp;s=460">
      <h2 id="name">Stefano Teodorani</h2>
      <h3 id="title">DBA, Programmer, Linux Administrator and Opensource lover</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Savignano sul Rubicone</span>
      
          <a id="follow" href="https://github.com/teopost">
              Follow
          </a>
      
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        32
        <span>Posts</span>
      </div>
      <div class="article-info-block">
        
          14
        
        <span>
            Tags
        </span>
      </div>
    </div>
    <div class="profile-block social-links">
      <table>
        <tr>
          
<td><a href="//github.com/teopost" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></td>





















<td><a href="//instagram.com/teopost" target="_blank" title="Instagram"><i class="fa fa-instagram"></i></a></td>

















<td><a href="//linkedin.com/in/stefano-teodorani-58722b70/" target="_blank" title="LinkedIn"><i class="fa fa-linkedin"></i></a></td>













<td><a href="//facebook.com/steodorani" target="_blank" title="Facebook"><i class="fa fa-facebook"></i></a></td>



<td><a href="//twitter.com/teopost" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></td>


          <td><a href="https://www.stefanoteodorani.it/index.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></td>
        </tr>
      </table>
    </div>
  </div>
</aside>

	    

	    
<section id="main">

    <article id="page-undefined" class="article article-type-page" itemscope="" itemprop="blogPost">
        <div class="article-inner">
            
                <img src="https://www.stefanoteodorani.it/banner/syncthing-su-raspberrypi.png" class="article-banner">
            

            <header class="article-header">
    <a href="https://www.stefanoteodorani.it/2017/06/20/syncthing-su-raspberrypi/">
    <h1 class="article-title" itemprop="name">
        Syncthing su Raspberrypi
    </h1>
    </a>
    <div class="article-meta">

        
        <div class="article-date">
            <i class="fa fa-calendar"></i>
            <time datetime="2017-06-20 22:11:56 &#43;0200 CEST" itemprop="datePublished">20-06-2017</time>
            &middot;
            791
            words
            &middot;
            4
            minute read
        </div>
        
        
            
            
            <div class="article-category">
                <i class="fa fa-folder"></i>
                
                
                <a class="article-category-link" href="https://www.stefanoteodorani.it/categories/linux">linux</a>
                
                
            </div>
            
        

        
            
            
            <div class="article-category">
                <i class="fa fa-tags"></i>
                
                
                <a class="article-category-link" href="https://www.stefanoteodorani.it/tags/raspberry">raspberry</a>
                
                
            </div>
            
        
    </div>
</header>

            <div class="article-entry" itemprop="articleBody">
                <p>Btsync era veramente un bel programma, ma dopo aver fatto venire l&rsquo;acquolina in bocca l&rsquo;hanno messo a pagamento.
La cosa peggiore tuttavia, restava il fatto che non fosse opensource.</p>
<p>Per fortuna esiste una validissima alternativa che risolte questi 2 problemi. Syncthing.
Syncthing che è scritto in go ed è per questo molto veloce e adatto ad essere installato su dispositivi che non hanno molta memorie e potenza di calcolo come, ad esempio, la mia amata Raspberry Pi.
La cosa che contraddistingue Syncthing, rispetto altre soluzioni opensource simili, è la sua architettura che si appoggia su relay server in cloud per la sincronizzazione dei file.
In questo modo la sincronizzazione può avvenire senza dover aprire porte nel vostro router, esattamente come accade con programmi tipo Dropbox.</p>
<p>Prima di partire, tenete presente che alla fine di questa guida:</p>
<ol>
<li>Syncthing dovrà funzionare sotto l&rsquo;utente pi</li>
<li>Come conseguente del punto 1, i files di configurazione saranno creati sotto la home dell&rsquo;utente pi (/home/pi/.config).</li>
<li>Le cartelle che potrebe condividere dovranno stare sotto la home dell&rsquo;utente pi.</li>
</ol>
<p>Bene. Vediamo ora come possiamo installarlo sulla Raspbian.</p>
<h2 id="installazione">Installazione</h2>
<p>Innanzitutto scarichiamo la chiave gpg per poter aggiungere in seguito il repository debian.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget -O - https://syncthing.net/release-key.txt | sudo apt-key add -
</code></pre></div><p>Ora aggiungiamo il repository</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;deb http://apt.syncthing.net/ syncthing release&#34;</span> | sudo tee -a /etc/apt/sources.list.d/syncthing-release.list
</code></pre></div><p>Aggiorniamo il repository</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get update
sudo apt-get install syncthing -y
</code></pre></div><p>Ora facciamo partire syncthing una prima volta. Questa operazione crea i files di configurazione nella home dell&rsquo;utente con cui abbiamo lanciato il programma. Digitate quindi</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">syncthing
</code></pre></div><p>Dovreste vedere un output tipo questo</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>monitor<span style="color:#f92672">]</span> 17:45:33 INFO: Starting syncthing
<span style="color:#f92672">[</span>start<span style="color:#f92672">]</span> 17:45:33 INFO: Generating RSA key and certificate <span style="color:#66d9ef">for</span> syncthing...
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: syncthing v0.11.12 <span style="color:#f92672">(</span>go1.4.2 linux-arm default<span style="color:#f92672">)</span> unknown-user@syncthing-builder 2015-07-05 09:24:21 UTC
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: My ID: HR2B56D-52WUAGB-36PBQRH-VBU3AAN-YS6SXIM-LJXVBZP-BR3CEMP-STI4EQW
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: No config file; starting with empty defaults
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: Edit /home/pi/.config/syncthing/config.xml to taste or use the GUI
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: Database block cache capacity <span style="color:#ae81ff">8192</span> KiB
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 OK: Ready to synchronize default <span style="color:#f92672">(</span>read-write<span style="color:#f92672">)</span>
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: Starting web GUI on http://127.0.0.1:8384/
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: Loading HTTPS certificate: open /home/pi/.config/syncthing/https-cert.pem: no such file or directory
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: Creating new HTTPS certificate
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: Generating RSA key and certificate <span style="color:#66d9ef">for</span> raspberrypi...
<span style="color:#f92672">[</span>HR2B5<span style="color:#f92672">]</span> 17:47:33 INFO: Completed initial scan <span style="color:#f92672">(</span>rw<span style="color:#f92672">)</span> of folder default
</code></pre></div><p>Ora fermiamo il programma premendo Ctrl-C</p>
<p>La configurazione standard di syncthing, prevede che l&rsquo;accesso alla sua pagina web di configurazione, possa avvenire solo dalla macchina locale. Stiamo installando syncthing su una raspberry quindi è ovvio che dobbiamo accedervi da remoto. Apriamo quindi il file di configurazione per modificare tale impostazione.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vi /home/pi/.config/syncthing/config.xml
</code></pre></div><p>Nel file dobbiamo cambiare la riga con scritto 127.0.0.1 (solo accessibile dalla macchina locale) in 0.0.0.0 (accessibile da tutte le macchine)</p>
<p>Modificare tls in true se volete attivare l&rsquo;ssl per l&rsquo;interfaccia di configurazione.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;gui enabled<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> tls<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;false&#34;</span>&gt;
 &lt;address&gt;0.0.0.0:8384&lt;/address&gt;
 &lt;apikey&gt;VbsKT2fCELYldTI74Tk4BKCbJP8Frlij&lt;/apikey&gt;
&lt;/gui&gt;
</code></pre></div><h2 id="autostart-di-syncthing-su-raspberry-pi">Autostart di Syncthing su Raspberry Pi</h2>
<p>Creare il file di init.d</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo vi /etc/init.d/syncthing
</code></pre></div><p>Incollateci dentro questo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/sh
</span><span style="color:#75715e"></span><span style="color:#75715e">### BEGIN INIT INFO</span>
<span style="color:#75715e"># Provides:          Syncthing</span>
<span style="color:#75715e"># Required-Start:    $local_fs $remote_fs $network</span>
<span style="color:#75715e"># Required-Stop:     $local_fs $remote_fs $network</span>
<span style="color:#75715e"># Default-Start:     2 3 4 5</span>
<span style="color:#75715e"># Default-Stop:      0 1 6</span>
<span style="color:#75715e"># Short-Description: Syncthing</span>
<span style="color:#75715e"># Description:       Syncthing is for backups</span>
<span style="color:#75715e">### END INIT INFO</span>


<span style="color:#75715e"># Documentation available at</span>
<span style="color:#75715e"># http://refspecs.linuxfoundation.org/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/iniscrptfunc.html</span>
<span style="color:#75715e"># Debian provides some extra functions though</span>
. /lib/lsb/init-functions


DAEMON_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;syncthing&#34;</span>
DAEMON_USER<span style="color:#f92672">=</span>pi
DAEMON_PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/usr/bin/syncthing&#34;</span>
DAEMON_OPTS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
DAEMON_PWD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
DAEMON_DESC<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>get_lsb_header_val $0 <span style="color:#e6db74">&#34;Short-Description&#34;</span><span style="color:#66d9ef">)</span>
DAEMON_PID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/var/run/</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">.pid&#34;</span>
DAEMON_NICE<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
DAEMON_LOG<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/var/log/syncthing&#39;</span>

<span style="color:#f92672">[</span> -r <span style="color:#e6db74">&#34;/etc/default/</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> . <span style="color:#e6db74">&#34;/etc/default/</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>

do_start<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  local result

    pidofproc -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> &gt; /dev/null
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $? -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        log_warning_msg <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74"> is already started&#34;</span>
        result<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">else</span>
        log_daemon_msg <span style="color:#e6db74">&#34;Starting </span><span style="color:#e6db74">${</span>DAEMON_DESC<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
        touch <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_LOG<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
        chown $DAEMON_USER <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_LOG<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
        chmod u+rw <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_LOG<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_USER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
            start-stop-daemon --start --quiet --oknodo --background <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --nicelevel $DAEMON_NICE <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --chdir <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PWD<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --pidfile <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> --make-pidfile <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --exec <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> -- $DAEMON_OPTS
            result<span style="color:#f92672">=</span>$?
        <span style="color:#66d9ef">else</span>
            start-stop-daemon --start --quiet --oknodo --background <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --nicelevel $DAEMON_NICE <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --chdir <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PWD<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --pidfile <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> --make-pidfile <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --chuid <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_USER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                --exec <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> -- $DAEMON_OPTS
            result<span style="color:#f92672">=</span>$?
        <span style="color:#66d9ef">fi</span>
        log_end_msg $result
    <span style="color:#66d9ef">fi</span>
    <span style="color:#66d9ef">return</span> $result
<span style="color:#f92672">}</span>

do_stop<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    local result

    pidofproc -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> &gt; /dev/null
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $? -ne <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        log_warning_msg <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74"> is not started&#34;</span>
        result<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">else</span>
        log_daemon_msg <span style="color:#e6db74">&#34;Stopping </span><span style="color:#e6db74">${</span>DAEMON_DESC<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
        killproc -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
        result<span style="color:#f92672">=</span>$?
        log_end_msg $result
        rm <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
    <span style="color:#66d9ef">fi</span>
    <span style="color:#66d9ef">return</span> $result
<span style="color:#f92672">}</span>

do_restart<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    local result
    do_stop
    result<span style="color:#f92672">=</span>$?
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $result <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        do_start
        result<span style="color:#f92672">=</span>$?
    <span style="color:#66d9ef">fi</span>
    <span style="color:#66d9ef">return</span> $result
<span style="color:#f92672">}</span>

do_status<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    local result
    status_of_proc -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DAEMON_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
    result<span style="color:#f92672">=</span>$?
    <span style="color:#66d9ef">return</span> $result
<span style="color:#f92672">}</span>

do_usage<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    echo $<span style="color:#e6db74">&#34;Usage: </span>$0<span style="color:#e6db74"> {start | stop | restart | status}&#34;</span>
    exit <span style="color:#ae81ff">1</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in
start<span style="color:#f92672">)</span>   do_start;   exit $? ;;
stop<span style="color:#f92672">)</span>    do_stop;    exit $? ;;
restart<span style="color:#f92672">)</span> do_restart; exit $? ;;
status<span style="color:#f92672">)</span>  do_status;  exit $? ;;
*<span style="color:#f92672">)</span>       do_usage;   exit  <span style="color:#ae81ff">1</span> ;;
<span style="color:#66d9ef">esac</span>
</code></pre></div><p>Rendere il file eseguibile</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod +x /etc/init.d/syncthing
</code></pre></div><p>Impostare lo startup del servizio alla partenza della raspberrypi</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo update-rc.d syncthing defaults
</code></pre></div>
            </div>
            <footer class="article-footer">
    <a data-url="https://www.stefanoteodorani.it/2017/06/20/syncthing-su-raspberrypi/" data-id="4ced86267ac95b9d4be798f947b91a08" class="article-share-link">
        <i class="fa fa-share"></i>
        Share
    </a>
    
    <a href="https://www.stefanoteodorani.it/2017/06/20/syncthing-su-raspberrypi/#disqus_thread" class="article-comment-link">
        Comments
    </a>
    

    <script>
    (function ($) {
        
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
    </script>
</footer>

        </div>

        
<nav id="article-nav">
    
    <a href="https://www.stefanoteodorani.it/2017/05/27/oracle-mail-spooler/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Older
      </strong>
      <div class="article-nav-title">Oracle mail spooler</div>
    </a>
    

    
    <a href="https://www.stefanoteodorani.it/2017/09/17/git-checkout-di-una-specifica-sottocartella/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Newer
      </strong>
      <div class="article-nav-title">Git checkout di una specifica sottocartella</div>
    </a>
    
</nav>


    </article>

    
    <section id="comments">
        <div id="disqus_thread">
            
        </div>
    </section>
    
</section>


	    
	    	<aside id="sidebar">
    
<div class="widget-wrap">
    <h3 class="widget-title">
        Recents
    </h3>
    <div class="widget">
        <ul id="recent-post">
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://www.stefanoteodorani.it/2020/05/01/schedulare-nmon-nel-crontab/" class="thumbnail">
                    
                        <span style="background-image:url(https://www.stefanoteodorani.it/banner/apache-pagina-cortesia.png)" alt="Syncthing su Raspberrypi" class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://www.stefanoteodorani.it/categories/linux">
                        linux
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://www.stefanoteodorani.it/2020/05/01/schedulare-nmon-nel-crontab/" class="title">Schedulare nmon nel crontab</a></p>
                    <p class="item-date">
                        <time datetime="2020-05-01 18:42:26 &#43;0100 &#43;0100" itemprop="datePublished">01-05-2020</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://www.stefanoteodorani.it/2019/04/24/pagina-di-cortesia-su-apache/" class="thumbnail">
                    
                        <span style="background-image:url(https://www.stefanoteodorani.it/banner/apache-pagina-cortesia.png)" alt="Syncthing su Raspberrypi" class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://www.stefanoteodorani.it/categories/linux">
                        linux
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://www.stefanoteodorani.it/2019/04/24/pagina-di-cortesia-su-apache/" class="title">Pagina di cortesia su Apache</a></p>
                    <p class="item-date">
                        <time datetime="2019-04-24 18:42:26 &#43;0100 &#43;0100" itemprop="datePublished">24-04-2019</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://www.stefanoteodorani.it/2019/01/20/lock-wait-e-timeout-in-db2/" class="thumbnail">
                    
                        <span style="background-image:url(https://www.stefanoteodorani.it/banner/lock-wait-e-timeout-in-db2.jpg)" alt="Syncthing su Raspberrypi" class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://www.stefanoteodorani.it/categories/database">
                        database
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://www.stefanoteodorani.it/2019/01/20/lock-wait-e-timeout-in-db2/" class="title">Lock wait e timeout in DB2</a></p>
                    <p class="item-date">
                        <time datetime="2019-01-20 18:42:26 &#43;0100 CET" itemprop="datePublished">20-01-2019</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://www.stefanoteodorani.it/2018/11/22/liquibase-vs-flyway/" class="thumbnail">
                    
                        <span style="background-image:url(https://www.stefanoteodorani.it/banner/liquibase-vs-flyway.png)" alt="Syncthing su Raspberrypi" class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://www.stefanoteodorani.it/categories/database">
                        database
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://www.stefanoteodorani.it/2018/11/22/liquibase-vs-flyway/" class="title">Liquibase vs Flyway</a></p>
                    <p class="item-date">
                        <time datetime="2018-11-22 18:00:00 &#43;0100 CET" itemprop="datePublished">22-11-2018</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://www.stefanoteodorani.it/2018/11/05/sql-tuning-advisor-per-uno-specifico-sql_id/" class="thumbnail">
                    
                        <span style="background-image:url(https://www.stefanoteodorani.it/banner/sql-tuning-advisor-with-sqlid.png)" alt="Syncthing su Raspberrypi" class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://www.stefanoteodorani.it/categories/database">
                        database
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://www.stefanoteodorani.it/2018/11/05/sql-tuning-advisor-per-uno-specifico-sql_id/" class="title">SQL Tuning Advisor per uno specifico sql_id</a></p>
                    <p class="item-date">
                        <time datetime="2018-11-05 21:36:13 &#43;0100 CET" itemprop="datePublished">05-11-2018</time>
                    </p>
                </div>
            </li>
            
        </ul>
    </div>
</div>


    


<div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
        <ul class="category-list">
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/categories/database">
                    database
                </a>
                <span class="category-list-count">12</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/categories/developer">
                    developer
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/categories/linux">
                    linux
                </a>
                <span class="category-list-count">13</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/categories/mobile">
                    mobile
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/categories/opendata">
                    opendata
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/categories/system">
                    system
                </a>
                <span class="category-list-count">3</span>
            </li>
            
        </ul>
    </div>
</div>




    


<div class="widget-wrap">
    <h3 class="widget-title">
        Tags
    </h3>
    <div class="widget">
        <ul class="category-list">
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/android">
                    android
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/apache">
                    apache
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/bash">
                    bash
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/ckan">
                    ckan
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/db-tools">
                    db-tools
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/db2">
                    db2
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/git">
                    git
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/github-pages">
                    github-pages
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/linux">
                    linux
                </a>
                <span class="category-list-count">2</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/oracle">
                    oracle
                </a>
                <span class="category-list-count">10</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/osx">
                    osx
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/raspberry">
                    raspberry
                </a>
                <span class="category-list-count">8</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/ubuntu">
                    ubuntu
                </a>
                <span class="category-list-count">2</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://www.stefanoteodorani.it/tags/virtual-machines">
                    virtual-machines
                </a>
                <span class="category-list-count">1</span>
            </li>
            
        </ul>
    </div>
</div>




    


    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

		
		
	</div>
</div>

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020
      Powered by <a href="//gohugo.io">Hugo</a>
    </div>
  </div>
</footer>


<script src="https://www.stefanoteodorani.it/fancybox/jquery.fancybox.pack.js"></script>
<script src="https://www.stefanoteodorani.it/js/script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>


<script>hljs.initHighlightingOnLoad();</script>




</body>
</html>
